(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{160:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return l})),n.d(t,"metadata",(function(){return s})),n.d(t,"rightToc",(function(){return o})),n.d(t,"default",(function(){return c}));var r=n(2),a=n(6),b=(n(0),n(205)),l={id:"ansible-install",title:"Ansible\u5b89\u88c5",sidebar_label:"Ansible\u5b89\u88c5"},s={id:"ansible-install",title:"Ansible\u5b89\u88c5",description:"\u67b6\u6784\u8bf4\u660e",source:"@site/docs/ansible-install.md",permalink:"/docs/ansible-install",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/ansible-install.md",sidebar_label:"Ansible\u5b89\u88c5",sidebar:"someSidebar",previous:{title:"Ansible\u4ecb\u7ecd",permalink:"/docs/ansible-readme"},next:{title:"Ansible\u6a21\u5757\u4f7f\u7528",permalink:"/docs/ansible-apply1"}},o=[{value:"\u67b6\u6784\u8bf4\u660e",id:"\u67b6\u6784\u8bf4\u660e",children:[{value:"\u90e8\u7f72ssh key",id:"\u90e8\u7f72ssh-key",children:[]}]}],i={rightToc:o};function c(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(b.b)("wrapper",Object(r.a)({},i,n,{components:t,mdxType:"MDXLayout"}),Object(b.b)("h2",{id:"\u67b6\u6784\u8bf4\u660e"},"\u67b6\u6784\u8bf4\u660e"),Object(b.b)("p",null,"\u6ce8\u610f\uff1a\u5982\u65e0\u7279\u6b8a\u8bf4\u660e\uff0c\u4ee5\u4e0b\u8bbe\u5907\u4e3b\u673a\u5747\u4e3aCentos7\u7248\u672c"),Object(b.b)("table",null,Object(b.b)("thead",{parentName:"table"},Object(b.b)("tr",{parentName:"thead"},Object(b.b)("th",Object(r.a)({parentName:"tr"},{align:null}),"\u4e3b\u673a\u540d"),Object(b.b)("th",Object(r.a)({parentName:"tr"},{align:null}),"\u7f51\u5361eth0"),Object(b.b)("th",Object(r.a)({parentName:"tr"},{align:null}),"\u7528\u9014"))),Object(b.b)("tbody",{parentName:"table"},Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"ansible-server"),Object(b.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"192.168.162.128"),Object(b.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"\u7528\u6765\u6279\u91cf\u7ba1\u7406\u4e3b\u673a")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"nfs-01"),Object(b.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"192.168.162.129"),Object(b.b)("td",Object(r.a)({parentName:"tr"},{align:null}))),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"rsync-01"),Object(b.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"192.168.162.130"),Object(b.b)("td",Object(r.a)({parentName:"tr"},{align:null}))))),Object(b.b)("h3",{id:"\u90e8\u7f72ssh-key"},"\u90e8\u7f72ssh key"),Object(b.b)("p",null,Object(b.b)("strong",{parentName:"p"},"1. ",Object(b.b)("inlineCode",{parentName:"strong"},"ansible-server")," \u521b\u5efa\u5bc6\u94a5\u5bf9")),Object(b.b)("pre",null,Object(b.b)("code",Object(r.a)({parentName:"pre"},{}),"[root@ansible-server ~]# ssh-keygen -t dsa\nGenerating public/private dsa key pair.\nEnter file in which to save the key (/root/.ssh/id_dsa):  #\u56de\u8f66\u5373\u53ef\uff0c\u7528\u9ed8\u8ba4\u8def\u5f84\nCreated directory '/root/.ssh'.\nEnter passphrase (empty for no passphrase):            #\u56de\u8f66\u5373\u53ef\uff0c\u4e0d\u8981\u5bf9\u5176\u8bbe\u7f6e\u5bc6\u7801\nEnter same passphrase again:   #\u56de\u8f66\u5373\u53ef\uff0c\u4e0d\u8981\u5bf9\u5176\u8bbe\u7f6e\u5bc6\u7801\nYour identification has been saved in /root/.ssh/id_dsa.\nYour public key has been saved in /root/.ssh/id_dsa.pub.\nThe key fingerprint is:\n31:4a:4f:9f:97:b0:b6:ca:4c:53:78:70:89:83:5f:16 root@m01\nThe key's randomart image is:\n+--[ DSA 1024]----+\n|          E      |\n|       . . o     |\n|      o B *      |\n|     . = @ + .   |\n|      . S B o    |\n|         + o     |\n|        o .      |\n|       + o       |\n|        +        |\n+-----------------+\n")),Object(b.b)("p",null,"\u53c2\u6570\uff1a"),Object(b.b)("ul",null,Object(b.b)("li",{parentName:"ul"},Object(b.b)("inlineCode",{parentName:"li"},"-t\uff1a\u6307\u5b9a\u5bc6\u94a5\u5bf9\u7684\u52a0\u5bc6\u7b97\u6cd5\uff0c\u53ef\u9009\u62e9dsa\u3001rsa"))),Object(b.b)("p",null,Object(b.b)("strong",{parentName:"p"},"2. ",Object(b.b)("inlineCode",{parentName:"strong"},"ansible-server")," \u67e5\u770b\u521b\u5efa\u7684\u5bc6\u94a5\u5bf9\u6587\u4ef6")),Object(b.b)("p",null,"  .pub\u7ed3\u5c3e\u7684\u662f\u516c\u94a5\uff0c\u53e6\u5916\u4e00\u4e2a\u662f\u79c1\u94a5"),Object(b.b)("pre",null,Object(b.b)("code",Object(r.a)({parentName:"pre"},{}),"[root@ansible-server ~]# cd /root/.ssh/\n[root@ansible-server .ssh]# ls\nid_rsa  id_rsa.pub\n\n")),Object(b.b)("p",null,Object(b.b)("strong",{parentName:"p"},"3. ",Object(b.b)("inlineCode",{parentName:"strong"},"ansible-server")," \u53d1\u9001\u516c\u94a5\u7ed9ansible\u5ba2\u6237\u7aef")),Object(b.b)("pre",null,Object(b.b)("code",Object(r.a)({parentName:"pre"},{}),"[root@ansible-server .ssh]# ssh-copy-id -i /root/.ssh/id_dsa.pub root@192.168.162.129\nThe authenticity of host '192.168.162.129 (192.168.162.129)' can't be established.\nECDSA key fingerprint is 0a:d1:51:3f:90:96:ea:24:33:7f:e9:ce:54:1f:a2:4e.\nAre you sure you want to continue connecting (yes/no)? yes\n/usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed\n/usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- if you are prompted now it is to install the new keys\nroot@192.168.162.129's password: \n\nNumber of key(s) added: 1\n\nNow try logging into the machine, with:   \"ssh 'root@192.168.162.129'\"\nand check to make sure that only the key(s) you wanted were added.\n\n")),Object(b.b)("p",null,"\u53c2\u6570\uff1a"),Object(b.b)("ul",null,Object(b.b)("li",{parentName:"ul"},Object(b.b)("inlineCode",{parentName:"li"},"-i       \u6307\u5b9a\u8981\u5206\u53d1\u7684\u516c\u94a5\u6587\u4ef6\u4ee5\u53ca\u8def\u5f84\u4fe1\u606f"))),Object(b.b)("p",null,Object(b.b)("strong",{parentName:"p"},"4. ",Object(b.b)("inlineCode",{parentName:"strong"},"ansible-server")," \u767b\u5f55ansible\u5ba2\u6237\u7aef")),Object(b.b)("p",null,"\u767b\u5f55\u65f6\u4e0d\u9700\u8981\u5bc6\u7801\u5c31\u8bf4\u660e\u516c\u94a5\u4f20\u8f93\u597d\u4e86"),Object(b.b)("pre",null,Object(b.b)("code",Object(r.a)({parentName:"pre"},{}),"[root@ansible-server .ssh]# ssh root@192.168.162.129\nLast login: Wed May 13 11:57:31 2020\n[root@nfs-01 ~]# \n")),Object(b.b)("p",null,"\u5f53\u7136\u4f60\u4e5f\u53ef\u4ee5\u65e0\u9700\u767b\u5f55\uff0c\u8ba9\u5b83\u6267\u884c\u4e00\u4e2a\u547d\u4ee4"),Object(b.b)("pre",null,Object(b.b)("code",Object(r.a)({parentName:"pre"},{}),"[root@ansible-server .ssh]# ssh root@192.168.162.129 date \n2020\u5e74 05\u6708 13\u65e5 \u661f\u671f\u4e09 12:12:45 CST\n\n")),Object(b.b)("p",null,Object(b.b)("strong",{parentName:"p"},"5. \u7f16\u5199\u811a\u672c\u6279\u91cf\u5b9e\u73b0\u516c\u94a5\u4f20\u8f93")),Object(b.b)("pre",null,Object(b.b)("code",Object(r.a)({parentName:"pre"},{}),"test\n")),Object(b.b)("p",null,Object(b.b)("strong",{parentName:"p"},"6. ssh\u5bc6\u94a5\u5bf9\u539f\u7406")),Object(b.b)("p",null,"ssh\u6709\u4e24\u79cd\u5e38\u89c1\u9a8c\u8bc1\u65b9\u5f0f\uff0c\u7b2c\u4e00\u79cd\u662f\u5bc6\u7801\u767b\u5f55\uff0c\u7b2c\u4e8c\u79cd\u662f\u5bc6\u94a5\u767b\u5f55\u3002\u5bc6\u94a5\u767b\u5f55\u662f\u4e3a\u4e86\u5b89\u5168\uff0c\u5f53\u7136\u6211\u4eec\u8fd9\u91cc\u7684\u5bc6\u94a5\u767b\u5f55\u662f\u4e3a\u4e86\u514d\u5bc6\u7801\u767b\u5f55\uff0c\u6240\u4ee5\u5728",Object(b.b)("inlineCode",{parentName:"p"},"ssh-keygen"),"\u7684\u65f6\u4e00\u5b9a\u4e0d\u8981\u914d\u7f6e\u5bc6\u7801 "),Object(b.b)("p",null,"\u2460. \u7ba1\u7406\u670d\u52a1\u5668\u521b\u5efa\u79c1\u94a5\u548c\u516c\u94a5\uff08\u5bc6\u94a5\u5bf9\uff09"),Object(b.b)("p",null,"\u2461. \u5c06\u516c\u94a5\u6587\u4ef6\u8fdc\u7a0b\u4f20\u9001\u590d\u5236\u5230\u88ab\u7ba1\u7406\u670d\u52a1\u5668\u76f8\u5e94\u7528\u6237~/.ssh/id_dsa.pub\u4e0b\uff0c\u5e76\u4fee\u6539.ssh\u76ee\u5f55\u6743\u9650\u4e3a700"),Object(b.b)("p",null,"\u2462. \u4fee\u6539\u516c\u94a5\u6587\u4ef6\u6587\u4ef6\u540d\u79f0\u4e3aauthorized_keys\uff0c\u6388\u6743\u6743\u9650\u4e3a600"),Object(b.b)("p",null,"\u2463. \u5229\u7528ssh\u670d\u52a1\u914d\u7f6e\u6587\u4ef6\u7684\u914d\u7f6e\u53c2\u6570\uff0c\u8fdb\u884c\u8bc6\u522b\u516c\u94a5\u6587\u4ef6authorized_keys"),Object(b.b)("p",null,"\u2464. \u8fdb\u800c\u5b9e\u73b0\u57fa\u4e8e\u5bc6\u94a5\u8fdc\u7a0b\u767b\u5f55\u670d\u52a1\u5668\uff08\u514d\u5bc6\u7801\u767b\u5f55/\u975e\u4ea4\u4e92\u65b9\u5f0f\u767b\u5f55\uff09"),Object(b.b)("ol",{start:7},Object(b.b)("li",{parentName:"ol"},Object(b.b)("inlineCode",{parentName:"li"},"ansible-server")," \u5b89\u88c5ansible\u3001\u88ab\u7ba1\u7406\u673a\u5668\u5b89\u88c5ansible\u88ab\u7ba1\u7406\u7ec4\u4ef6")),Object(b.b)("pre",null,Object(b.b)("code",Object(r.a)({parentName:"pre"},{}),"[root@ansible-server .ssh]# yum -y install ansible\n[root@ansible-server .ssh]# ansible --version #\u67e5\u770b\u7248\u672c\nansible 2.9.7\n  config file = /etc/ansible/ansible.cfg\n  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\n  executable location = /usr/bin/ansible\n  python version = 2.7.5 (default, Nov 20 2015, 02:00:19) [GCC 4.8.5 20150623 (Red Hat 4.8.5-4)]\n\n")),Object(b.b)("p",null,Object(b.b)("inlineCode",{parentName:"p"},"\u88ab\u63a7\u673a\u5668"),"\u5b89\u88c5\u4ee5\u4e0b\u7ec4\u4ef6\u3002\u8be5\u8f6f\u4ef6\u662f\u7528\u6765\u5bf9selinux\u8fdb\u884c\u8bbe\u7f6e\u7684\uff0c\u786e\u4fdd\u5373\u4f7f\u670d\u52a1\u5668selinux\u670d\u52a1\u5f00\u542f\uff0c\u4f9d\u65e7\u80fd\u591f\u901a\u8fc7ansible \u8f6f\u4ef6\u7ba1\u7406\u3002\u5982\u679c\u88ab\u63a7\u673a\u5668\u4e0d\u5f00\u542fselinux\u90a3\u5c31\u4e0d\u7528\u4e0b\u8f7d\u8fd9\u4e2a\u7ec4\u4ef6\u4e86"),Object(b.b)("pre",null,Object(b.b)("code",Object(r.a)({parentName:"pre"},{})," yum install libselinux-python -y\n")),Object(b.b)("p",null,"8.",Object(b.b)("inlineCode",{parentName:"p"},"ansible-server")," \u67e5\u770b\u914d\u7f6e\u76ee\u5f55"),Object(b.b)("pre",null,Object(b.b)("code",Object(r.a)({parentName:"pre"},{}),"[root@ansible-server .ssh]# ll\ntotal 28\n-rw-r--r-- 1 root root 18066 Sep  6 06:38 ansible.cfg  #ansible\u914d\u7f6e\u6587\u4ef6\n-rw-r--r-- 1 root root  1016 Sep  6 06:38 hosts       #\u5b9a\u4e49ansible\u53ef\u4ee5\u7ba1\u7406\u7684\u4e3b\u673a\u4fe1\u606f\ndrwxr-xr-x 2 root root  4096 Sep  6 06:38 roles   #\u4e3b\u8981\u5728\u81ea\u52a8\u5316\u7684\u65f6\u5019\u90e8\u7f72\u591a\u53f0\u4e3b\u673a\u65f6\u4f7f\u7528\n")))}c.isMDXComponent=!0},205:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return O}));var r=n(0),a=n.n(r);function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},b=Object.keys(e);for(r=0;r<b.length;r++)n=b[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(e);for(r=0;r<b.length;r++)n=b[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var i=a.a.createContext({}),c=function(e){var t=a.a.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},p=function(e){var t=c(e.components);return a.a.createElement(i.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},d=a.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,b=e.originalType,l=e.parentName,i=o(e,["components","mdxType","originalType","parentName"]),p=c(n),d=r,O=p["".concat(l,".").concat(d)]||p[d]||u[d]||b;return n?a.a.createElement(O,s(s({ref:t},i),{},{components:n})):a.a.createElement(O,s({ref:t},i))}));function O(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var b=n.length,l=new Array(b);l[0]=d;var s={};for(var o in t)hasOwnProperty.call(t,o)&&(s[o]=t[o]);s.originalType=e,s.mdxType="string"==typeof e?e:r,l[1]=s;for(var i=2;i<b;i++)l[i]=n[i];return a.a.createElement.apply(null,l)}return a.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);