(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{157:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return b})),n.d(t,"metadata",(function(){return l})),n.d(t,"rightToc",(function(){return o})),n.d(t,"default",(function(){return s}));var r=n(2),c=n(6),a=(n(0),n(205)),b={id:"centos-readme",title:"\u5b89\u88c5Centos7"},l={id:"centos-readme",title:"\u5b89\u88c5Centos7",description:"Centos\u4ecb\u7ecd",source:"@site/docs/centos-readme.md",permalink:"/docs/centos-readme",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/centos-readme.md",sidebar:"someSidebar",next:{title:"Centos7\u751f\u4ea7\u5efa\u8bae",permalink:"/docs/centos-prod"}},o=[{value:"Centos\u4ecb\u7ecd",id:"centos\u4ecb\u7ecd",children:[]},{value:"\u5b89\u88c5Centos7\u540e\u7684\u64cd\u4f5c",id:"\u5b89\u88c5centos7\u540e\u7684\u64cd\u4f5c",children:[{value:"\u914d\u7f6e\u7f51\u7edc",id:"\u914d\u7f6e\u7f51\u7edc",children:[]},{value:"\u5173\u95ed\u65e0\u7528\u670d\u52a1",id:"\u5173\u95ed\u65e0\u7528\u670d\u52a1",children:[]},{value:"\u7cfb\u7edf\u4f18\u5316\u5927\u6cd5",id:"\u7cfb\u7edf\u4f18\u5316\u5927\u6cd5",children:[]},{value:"\u67e5\u770b\u7cfb\u7edf\u57fa\u7840\u4fe1\u606f",id:"\u67e5\u770b\u7cfb\u7edf\u57fa\u7840\u4fe1\u606f",children:[]}]},{value:"\u7cfb\u7edf\u73af\u5883\u53d8\u91cf",id:"\u7cfb\u7edf\u73af\u5883\u53d8\u91cf",children:[{value:"\u5b89\u88c5\u5e38\u7528\u8f6f\u4ef6",id:"\u5b89\u88c5\u5e38\u7528\u8f6f\u4ef6",children:[]}]}],i={rightToc:o};function s(e){var t=e.components,n=Object(c.a)(e,["components"]);return Object(a.b)("wrapper",Object(r.a)({},i,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("h2",{id:"centos\u4ecb\u7ecd"},"Centos\u4ecb\u7ecd"),Object(a.b)("p",null,"Linux\u7cfb\u7edf\u6700\u91cd\u8981\u7684\u5c31\u662f\u5185\u6838,\u6709\u4e86\u5185\u6838\u4e4b\u540e\u53ef\u4ee5\u6839\u636e\u81ea\u5df1\u7684\u9700\u6c42\u5f00\u53d1\u7cfb\u7edf\u3002"),Object(a.b)("p",null,"\u8fd9\u79cd\u7cfb\u7edf\u88ab\u79f0\u4e3aLinux\u53d1\u884c\u7248,Linux\u53d1\u884c\u7248\u76ee\u524d\u5e38\u89c1\u7684\u6709\uff1aDebian\u3001Ubuntu\u3001Kali\u3001Centos\u3001Redhat\u3001Fedora..."),Object(a.b)("p",null,"\u67d0\u4e9b\u7cfb\u7edf\u662f\u7531\u4e00\u4e2a\u6bcd\u516c\u53f8\u5f00\u53d1\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u79f0\u4e3aXXX\u7cfb\u5217\u3002"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},Object(a.b)("p",{parentName:"li"},"Ubuntu\u7cfb\u5217\uff1aUbuntu\u3001Debian\u3001Kali")),Object(a.b)("li",{parentName:"ul"},Object(a.b)("p",{parentName:"li"},"Radhat\u7cfb\u5217\uff1aCentos\u3001Redhat\u3001Fedora"))),Object(a.b)("p",null,"Centos\u7cfb\u7edf\u662f\u514d\u8d39\u7684, \u800c\u4e14\u7528\u4e8e\u751f\u4ea7\u73af\u5883\u7684\u8f6f\u4ef6\u6709\u5f88\u591a,\u6240\u4ee5\u8d8a\u6765\u8d8a\u591a\u7684\u4f01\u4e1a\u559c\u6b22\u4e0a\u4e86Centos\u7cfb\u7edf\u3002"),Object(a.b)("p",null,"\u76ee\u524d\u4e3b\u6d41\u7684Centos\u7248\u672c\u662f7, \u6700\u65b0\u7248\u672c\u662fCentos8\u3002"),Object(a.b)("h2",{id:"\u5b89\u88c5centos7\u540e\u7684\u64cd\u4f5c"},"\u5b89\u88c5Centos7\u540e\u7684\u64cd\u4f5c"),Object(a.b)("p",null,"\u5b89\u88c5Centos7\u662f\u8fd0\u7ef4\u7684\u57fa\u64cd, \u8fd9\u91cc\u5c31\u4e0d\u5199\u4e86\u3002\u4e3b\u8981\u662f\u8bb2\u8ff0\u5b89\u88c5\u5b8cCentos7\u7684\u64cd\u4f5c"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},Object(a.b)("a",Object(r.a)({parentName:"li"},{href:"#%E9%85%8D%E7%BD%AE%E7%BD%91%E7%BB%9C"}),"\u914d\u7f6e\u7f51\u7edc")),Object(a.b)("li",{parentName:"ul"},Object(a.b)("a",Object(r.a)({parentName:"li"},{href:"#%E5%85%B3%E9%97%AD%E6%97%A0%E7%94%A8%E6%9C%8D%E5%8A%A1"}),"\u5173\u95ed\u65e0\u7528\u670d\u52a1")),Object(a.b)("li",{parentName:"ul"},Object(a.b)("a",Object(r.a)({parentName:"li"},{href:"#%E5%AE%89%E8%A3%85%E5%B8%B8%E7%94%A8%E8%BD%AF%E4%BB%B6"}),"\u5b89\u88c5\u5e38\u7528\u8f6f\u4ef6")),Object(a.b)("li",{parentName:"ul"},Object(a.b)("a",Object(r.a)({parentName:"li"},{href:"#%E7%B3%BB%E7%BB%9F%E4%BC%98%E5%8C%96%E5%A4%A7%E6%B3%95"}),"\u7cfb\u7edf\u4f18\u5316\u5927\u6cd5")),Object(a.b)("li",{parentName:"ul"},Object(a.b)("a",Object(r.a)({parentName:"li"},{href:"#%E6%9F%A5%E7%9C%8B%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF"}),"\u67e5\u770b\u7cfb\u7edf\u4fe1\u606f"))),Object(a.b)("h3",{id:"\u914d\u7f6e\u7f51\u7edc"},"\u914d\u7f6e\u7f51\u7edc"),Object(a.b)("h4",{id:"\u914d\u7f6e\u9759\u6001\u7f51\u7edc"},"\u914d\u7f6e\u9759\u6001\u7f51\u7edc"),Object(a.b)("p",null,"\u539f\u5148\u914d\u7f6e\u6587\u4ef6",Object(a.b)("inlineCode",{parentName:"p"},"/etc/sysconfig/network-scripts/ifcfg-eno16777736 ")),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{}),"TYPE=Ethernet\nBOOTPROTO=dhcp\nDEFROUTE=yes\nPEERDNS=yes\nPEERROUTES=yes\nIPV4_FAILURE_FATAL=no\nIPV6INIT=yes\nIPV6_AUTOCONF=yes\nIPV6_DEFROUTE=yes\nIPV6_PEERDNS=yes\nIPV6_PEERROUTES=yes\nIPV6_FAILURE_FATAL=no\nNAME=eno16777736\nUUID=706ac8a2-1021-412d-8dc7-ff376bfe3e9d\nDEVICE=eno16777736\nONBOOT=no\n")),Object(a.b)("p",null,"\u4fee\u6539\u540e\u7684\u914d\u7f6e\u6587\u4ef6\uff08",Object(a.b)("a",Object(r.a)({parentName:"p"},{href:"http://www.jq22.com/textDifference"}),"\u5728\u7ebf\u6587\u4ef6\u5185\u5bb9\u5bf9\u6bd4\u5de5\u5177"),"\uff09"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-bash",metastring:'title="/etc/sysconfig/network-scripts/ifcfg-eno16777736"',title:'"/etc/sysconfig/network-scripts/ifcfg-eno16777736"'}),"# \u7f51\u5361\u7c7b\u578b\uff1aEthernet\u4ee5\u592a\u7f51\nTYPE=Ethernet\n# \u4f7f\u7528\u9759\u6001\u7684IP\u5730\u5740\n  // highlight-start\nBOOTPROTO=static\n // highlight-end\nDEFROUTE=yes\nPEERDNS=yes\nPEERROUTES=yes\nIPV4_FAILURE_FATAL=no\nIPV6INIT=yes\nIPV6_AUTOCONF=yes\nIPV6_DEFROUTE=yes\nIPV6_PEERDNS=yes\nIPV6_PEERROUTES=yes\nIPV6_FAILURE_FATAL=no\nNAME=eno16777736\n# Linux\u7cfb\u7edf\u4e2d\u786c\u4ef6\u8bbe\u5907\u7684\u552f\u4e00\u6807\u8bc6\nUUID=706ac8a2-1021-412d-8dc7-ff376bfe3e9d\n# \u8bbe\u5907\u540d\nDEVICE=eno16777736\n\n# \u5f00\u673a\u542f\u52a8\u65f6\u542f\u52a8\u8fd9\u4e2a\u7f51\u5361\n  // highlight-start\nONBOOT=yes\n// highlight-end\n# IP\u5730\u5740\n  // highlight-start\nIPADDR=192.168.21.134\n// highlight-end\n# \u5b50\u7f51\u63a9\u7801\n  // highlight-start\nNETMASK=255.255.255.0\n// highlight-end\n# \u7f51\u5173\n  // highlight-start\nGATEWAY=192.168.21.2\n// highlight-end\n# DNS1\n  // highlight-start\nDNS1=114.114.114.114\n// highlight-end\n# DNS2\n  // highlight-start\nDNS2=8.8.8.8\n  // highlight-end\n};\n")),Object(a.b)("h4",{id:"\u4fee\u6539\u4e3b\u673a\u540d"},"\u4fee\u6539\u4e3b\u673a\u540d"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{}),"hostname lofty #\u4e34\u65f6\u4fee\u6539\nhostnamectl set-hostname lofty #\u6c38\u4e45\u4fee\u6539\n")),Object(a.b)("h4",{id:"dns\u89e3\u6790"},"DNS\u89e3\u6790"),Object(a.b)("p",null,"\u672c\u5730DNS\u89e3\u6790\u6587\u4ef6",Object(a.b)("inlineCode",{parentName:"p"},"/etc/hosts")),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-bash",metastring:'title="/etc/hosts"',title:'"/etc/hosts"'}),"172.27.0.5 localhost.localdomain VM-0-5-ubuntu\n172.27.0.5 localhost\n")),Object(a.b)("p",null,"\u672c\u5730DNS\u670d\u52a1\u5668",Object(a.b)("inlineCode",{parentName:"p"},"/etc/reslov.conf")),Object(a.b)("p",null,"\u5728ifcfg\u7f51\u5361\u6587\u4ef6\u5df2\u7ecf\u53ef\u4ee5\u6307\u5b9aDNS\u670d\u52a1\u5668\u4e86, \u6211\u4eec\u4e5f\u53ef\u4ee5\u5728",Object(a.b)("inlineCode",{parentName:"p"},"/etc/reslov.conf"),"\u6307\u5b9a\u3002\u4f46\u662f\u4f18\u5148\u7ea7\u4e0d\u6e05\u695a\u3002"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-bash",metastring:'title="/etc/reslov.conf"',title:'"/etc/reslov.conf"'}),"nameserver 114.114.114.114\n")),Object(a.b)("p",null,"\u7528\u4e8e\u65e5\u5e38\u5de1\u68c0\u7684\u5c0f\u5de5\u5177"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{}),"wget http://percona.com/get/pt-summary\nchmod +x ./pt-summary\nmv pt-summary /usr/bin\n")),Object(a.b)("h3",{id:"\u5173\u95ed\u65e0\u7528\u670d\u52a1"},"\u5173\u95ed\u65e0\u7528\u670d\u52a1"),Object(a.b)("h4",{id:"\u5173\u95edfirewalld\u548cselinux"},"\u5173\u95edfirewalld\u548cselinux"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{}),"#\u4e34\u65f6\u5173\u95ed\nsystemctl stop firewalld \n\n#\u6c38\u4e45\u5173\u95ed,\u5373\u8bbe\u7f6e\u5f00\u673a\u7684\u65f6\u5019\u4e0d\u81ea\u52a8\u542f\u52a8 \u91cd\u542f\u540e\u751f\u6548\nsystemctl disable firewalld\n\n#\u4e34\u65f6\u5173\u95ed\nsetenforce 0 \n\n#\u6c38\u4e45\u5173\u95edselinux\nsed -i '/SELINUX/s/enforcing/disabled/' /etc/selinux/config\n")),Object(a.b)("h3",{id:"\u7cfb\u7edf\u4f18\u5316\u5927\u6cd5"},"\u7cfb\u7edf\u4f18\u5316\u5927\u6cd5"),Object(a.b)("h3",{id:"\u67e5\u770b\u7cfb\u7edf\u57fa\u7840\u4fe1\u606f"},"\u67e5\u770b\u7cfb\u7edf\u57fa\u7840\u4fe1\u606f"),Object(a.b)("h4",{id:"\u67e5\u770b\u7cfb\u7edf\u7248\u672c\u4fe1\u606f"},"\u67e5\u770b\u7cfb\u7edf\u7248\u672c\u4fe1\u606f"),Object(a.b)("p",null,"1.\u67e5\u770b\u7cfb\u7edf\u53d1\u884c\u7248"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{}),"[root@ansible-server roles]# cat /etc/redhat-release \nCentOS Linux release 7.2.1511 (Core) \n")),Object(a.b)("p",null,"2.\u67e5\u770b\u7cfb\u7edf\u72b6\u6001\uff0c\u5982\uff1a\u4e3b\u673a\u540d\u3001\u865a\u62df\u5316\u6280\u672f\u3001\u5185\u6838\u7248..."),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{}),"[root@ansible-server roles]# hostnamectl status\n   Static hostname: localhost.localdomain\nTransient hostname: ansible-server\n         Icon name: computer-vm\n           Chassis: vm\n        Machine ID: a361d8714ad744b9bc95cc9c713757a8\n           Boot ID: c60580c8c8ae42bfbd7a1ac94f8ac0cd\n    Virtualization: vmware\n  Operating System: CentOS Linux 7 (Core)\n       CPE OS Name: cpe:/o:centos:centos:7\n            Kernel: Linux 3.10.0-327.el7.x86_64\n      Architecture: x86-64\n")),Object(a.b)("h2",{id:"\u7cfb\u7edf\u73af\u5883\u53d8\u91cf"},"\u7cfb\u7edf\u73af\u5883\u53d8\u91cf"),Object(a.b)("p",null,"1.\u4fee\u6539\u4e2d\u6587\u5b57\u7b26\u96c6"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{}),"export LANG=zh_CN.UTF-8\n")),Object(a.b)("h3",{id:"\u5b89\u88c5\u5e38\u7528\u8f6f\u4ef6"},"\u5b89\u88c5\u5e38\u7528\u8f6f\u4ef6"),Object(a.b)("h4",{id:"\u4f7f\u7528centos-yum\u963f\u91cc\u6e90"},"\u4f7f\u7528Centos yum\u963f\u91cc\u6e90"),Object(a.b)("p",null,"Centos7\u662f\u56fd\u5916\u5f00\u53d1\u7684, \u6240\u4ee5\u8f6f\u4ef6\u5305\u6e90\u662f\u56fd\u5916\u7684, \u9700\u8981\u4f7f\u7528\u56fd\u5185\u6e90\u8fdb\u884c\u52a0\u901f"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"1. \u5907\u4efd")),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{}),"mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"2. \u4e0b\u8f7d\u65b0\u7684 CentOS-Base.repo \u5230 /etc/yum.repos.d/"),"\n\u5f53\u7136\u5982\u679c\u60a8\u6ca1\u6709wget\u547d\u4ee4\u53ef\u4ee5\u66ff\u4ee3\u4e3acurl\uff0c\u5982\u679c\u60a8\u662f6\u6216\u80057\uff0c\u628aCentos-7.repo\u6539\u6210\u5bf9\u5e94\u6570\u5b57\u5373\u53efCentOS-Base6.repo\u5373\u53ef"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{}),"curl -o /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-7.repo\nyum -y install epel-release\n")),Object(a.b)("h4",{id:"\u5b89\u88c5\u5e38\u7528\u8f6f\u4ef6-1"},"\u5b89\u88c5\u5e38\u7528\u8f6f\u4ef6"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{}),"yum -y install git telnet lrzsz vim net-tools lsof ntpdate\n")),Object(a.b)("p",null,"yum \u8fd0\u884c\u65f6\u51fa\u73b0\u89e3\u6790\u9519\u8bef\uff0c\u90a3\u80af\u5b9a\u662fDNS\u6ca1\u8bbe\u7f6e\u597d\u5662"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{}),'\u9519\u8bef\uff1a\u8df3\u8fc7 http://repo.zabbix.com/zabbix/3.0/rhel/7/x86_64/zabbix-release-3.0-1.el7.noarch.rpm - \u4f20\u8f93\u5931\u8d25\n\u5df2\u52a0\u8f7d\u63d2\u4ef6\uff1afastestmirror\nhttp://ftp.sjtu.edu.cn/centos/7.8.2003/os/x86_64/repodata/repomd.xml: [Errno 14] curl#7 - "Failed to connect to 2001:da8:8000:6023::230: \u7f51\u7edc\u4e0d\u53ef\u8fbe"\n\u6b63\u5728\u5c1d\u8bd5\u5176\u5b83\u955c\u50cf\u3002\n')),Object(a.b)("h4",{id:"\u5b89\u88c5\u81ea\u52a8\u8865\u9f50\u529f\u80fd"},"\u5b89\u88c5\u81ea\u52a8\u8865\u9f50\u529f\u80fd"),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"centos7\u5b89\u88c5\u81ea\u52a8\u8865\u5168\u8f6f\u4ef6\u5305,\u8fd9\u6837docker\u5c31\u53ef\u4ee5\u81ea\u52a8\u8865\u5168,\u91cd\u65b0\u767b\u9646shell\u624d\u80fd\u751f\u6548")),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{}),"yum -y install bash-completion\n")),Object(a.b)("h4",{id:"ulimit-65535"},"ulimit 65535"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{}),"cat >> /etc/security/limits.conf <<EOF\n* soft nofile 65536\n* hard nofile 65536\nEOF\n")),Object(a.b)("h4",{id:"\u5173\u95edswap\u63d0\u9ad8\u6027\u80fd"},"\u5173\u95edswap\u63d0\u9ad8\u6027\u80fd"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{})," swapoff -a\n\n#UUID=1b7a4d0b-2a57-4d56-b481-45ff65eec35f swap                    swap    defaults        0 0\necho vm.swappiness=0 >> /etc/sysctl.conf\nsysctl -p\n")))}s.isMDXComponent=!0},205:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return d}));var r=n(0),c=n.n(r);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n,r,c={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}var i=c.a.createContext({}),s=function(e){var t=c.a.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=s(e.components);return c.a.createElement(i.Provider,{value:t},e.children)},O={inlineCode:"code",wrapper:function(e){var t=e.children;return c.a.createElement(c.a.Fragment,{},t)}},u=c.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,b=e.parentName,i=o(e,["components","mdxType","originalType","parentName"]),p=s(n),u=r,d=p["".concat(b,".").concat(u)]||p[u]||O[u]||a;return n?c.a.createElement(d,l(l({ref:t},i),{},{components:n})):c.a.createElement(d,l({ref:t},i))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,b=new Array(a);b[0]=u;var l={};for(var o in t)hasOwnProperty.call(t,o)&&(l[o]=t[o]);l.originalType=e,l.mdxType="string"==typeof e?e:r,b[1]=l;for(var i=2;i<a;i++)b[i]=n[i];return c.a.createElement.apply(null,b)}return c.a.createElement.apply(null,n)}u.displayName="MDXCreateElement"}}]);